Patch from MiniMyth2 project

Developed-by: Piotr Oniszczuk <piotr.oniszczuk@gmail.com>
Signed-off-by: Piotr Oniszczuk <piotr.oniszczuk@gmail.com>



diff --speed-large-files --no-dereference --minimal -Naur linux-6.19/arch/arm64/boot/dts/amlogic/meson-s4.dtsi linux-6.19/arch/arm64/boot/dts/amlogic/meson-s4.dtsi
--- linux-6.19/arch/arm64/boot/dts/amlogic/meson-s4.dtsi	2026-02-15 21:26:20.488644935 +0100
+++ linux-6.19/arch/arm64/boot/dts/amlogic/meson-s4.dtsi	2026-02-14 15:14:35.437822725 +0100
@@ -828,6 +828,21 @@
 					};
 				};
 
+				ao_cec_a_pins: ao_cec_a {
+					mux {
+						groups = "ao_cec_a";
+						function = "ao_cec_a";
+						bias-disable;
+					};
+				};
+
+				/*cec_ao_b_h_pins: cec_ao_b_h {
+					mux {
+						groups = "cec_ao_b_h";
+						function = "cec_ao_b_h";
+						bias-disable;
+					};
+				};*/
 			};
 
 			gpio_intc: interrupt-controller@4080 {
@@ -1052,6 +1067,26 @@
 				amlogic,has-chip-id;
 			};
 
+			cec_AO: cec@44000 {
+				compatible = "amlogic,meson-gx-ao-cec";
+				//compatible = "amlogic,meson-g12a-ao-cec";
+				reg = <0x0 0x44000 0x0 0x14>;
+				interrupts = <GIC_SPI 180 IRQ_TYPE_EDGE_RISING>;
+				clocks = <&clkc_periphs CLKID_CECA_32K_CLKOUT>,
+					 <&clkc_periphs CLKID_CECB_32K_CLKOUT>;
+				clock-names = "ceca_32k_clkout";
+				status = "disabled";
+			};
+
+			/*cecb_AO: cec@280 {
+				compatible = "amlogic,meson-g12a-ao-cec";
+				reg = <0x0 0x00280 0x0 0x1c>;
+				interrupts = <GIC_SPI 203 IRQ_TYPE_EDGE_RISING>;
+				clocks = <&clkc_AO CLKID_AO_CTS_OSCIN>;
+				clock-names = "oscin";
+				status = "disabled";
+			};*/
+
 			ir: ir@84040 {
 				compatible = "amlogic,meson-s4-ir";
 				reg = <0x0 0x84040 0x0 0x30>;
diff --speed-large-files --no-dereference --minimal -Naur linux-6.19/arch/arm64/boot/dts/amlogic/meson-s4-s905y4-khadas-vim1s.dts linux-6.19/arch/arm64/boot/dts/amlogic/meson-s4-s905y4-khadas-vim1s.dts
--- linux-6.19/arch/arm64/boot/dts/amlogic/meson-s4-s905y4-khadas-vim1s.dts	2026-02-15 21:26:20.663865065 +0100
+++ linux-6.19/arch/arm64/boot/dts/amlogic/meson-s4-s905y4-khadas-vim1s.dts	2026-02-14 15:03:37.318549814 +0100
@@ -650,3 +650,11 @@
 	linux,rc-map-name = "rc-beelink-gs1";
 	status = "okay";
 };
+
+&cec_AO {
+	pinctrl-0 = <&ao_cec_a_pins>;
+	pinctrl-names = "default";
+	status = "okay";
+	hdmi-phandle = <&hdmi_tx>;
+};
+
--

MiniMyth2

