Patch from MiniMyth2 project

Developed-by: Piotr Oniszczuk <piotr.oniszczuk@gmail.com>
Signed-off-by: Piotr Oniszczuk <piotr.oniszczuk@gmail.com>



diff --speed-large-files --no-dereference --minimal -Naur mythtv-7c781b38604e2d4751f427c0527cc73d75bf7ca6/mythtv/programs/mythbackend/mainserver.cpp mythtv-7c781b38604e2d4751f427c0527cc73d75bf7ca6/mythtv/programs/mythbackend/mainserver.cpp
--- mythtv-7c781b38604e2d4751f427c0527cc73d75bf7ca6/mythtv/programs/mythbackend/mainserver.cpp	2025-10-18 19:20:06.000000000 +0200
+++ mythtv-7c781b38604e2d4751f427c0527cc73d75bf7ca6/mythtv/programs/mythbackend/mainserver.cpp	2025-10-25 17:02:44.906804532 +0200
@@ -452,7 +452,7 @@
     if (sock->IsDataAvailable())
         ProcessRequestWork(sock);
     else
-        LOG(VB_GENERAL, LOG_INFO, LOC + QString("No data on sock %1")
+        LOG(VB_GENERAL, LOG_ERR, LOC + QString("No data on sock %1")
             .arg(sock->GetSocketDescriptor()));
 }
 
@@ -472,7 +472,7 @@
         if (!pbs->ReadStringList(listline) || listline.empty())
         {
             pbs->DecrRef();
-            LOG(VB_GENERAL, LOG_INFO, "No data in ProcessRequestWork()");
+            LOG(VB_GENERAL, LOG_ERR, "No data in ProcessRequestWork()");
             return;
         }
         pbs->DecrRef();
@@ -484,7 +484,7 @@
     }
     else if (!sock->ReadStringList(listline) || listline.empty())
     {
-        LOG(VB_GENERAL, LOG_INFO, LOC + "No data in ProcessRequestWork()");
+        LOG(VB_GENERAL, LOG_ERR, LOC + "No data in ProcessRequestWork()");
         return;
     }
 
@@ -1770,9 +1770,9 @@
         m_playbackList.push_back(pbs);
         lock.unlock();
 
-        LOG(VB_GENERAL, LOG_INFO, LOC + QString("MainServer::ANN %1")
+        LOG(VB_GENERAL, LOG_DEBUG, LOC + QString("MainServer::ANN %1")
                                       .arg(commands[1]));
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_DEBUG, LOC +
             QString("adding: %1(%2) as a client (events: %3)")
                                       .arg(commands[2])
                                       .arg(quintptr(socket),0,16)
@@ -1903,9 +1903,9 @@
             return;
         }
 
-        LOG(VB_NETWORK, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_DEBUG, LOC +
             "MainServer::HandleAnnounce FileTransfer");
-        LOG(VB_NETWORK, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_DEBUG, LOC +
             QString("adding: %1 as a remote file transfer") .arg(commands[2]));
         QStringList::const_iterator it = slist.cbegin();
         QString path = *(++it);
@@ -2034,7 +2034,7 @@
             return;
         }
         ft->IncrRef();
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_DEBUG, LOC +
             QString("adding: %1(%2) as a file transfer")
                                       .arg(commands[2])
                                       .arg(quintptr(socket),0,16));
@@ -3246,7 +3246,7 @@
     // scheduler to continue servicing other recordings.
     if (!m_addChildInputLock.tryLock())
     {
-        LOG(VB_GENERAL, LOG_INFO, LOC + "HandleAddChildInput: Already locked");
+        LOG(VB_GENERAL, LOG_ERR, LOC + "HandleAddChildInput: Already locked");
         return false;
     }
 
@@ -5743,7 +5743,7 @@
                     }
                     else
                     {
-                        LOG(VB_GENERAL, LOG_INFO, LOC +
+                        LOG(VB_GENERAL, LOG_ERR, LOC +
                             QString("HandleScanMusic: Failed to grab slave socket on '%1'").arg(hostname));
                     }
                 }
@@ -5795,7 +5795,7 @@
             return;
         }
 
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_ERR, LOC +
             QString("HandleMusicTagUpdateVolatile: Failed to grab slave socket on '%1'").arg(hostname));
 
         strlist << "ERROR: slave not found";
@@ -5855,7 +5855,7 @@
             return;
         }
 
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_ERR, LOC +
             QString("HandleMusicCalcTrackLen: Failed to grab slave socket on '%1'").arg(hostname));
 
         strlist << "ERROR: slave not found";
@@ -5914,7 +5914,7 @@
             return;
         }
 
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_ERR, LOC +
             QString("HandleMusicTagUpdateMetadata: Failed to grab "
                     "slave socket on '%1'").arg(hostname));
 
@@ -6000,7 +6000,7 @@
             return;
         }
 
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_ERR, LOC +
             QString("HandleMusicFindAlbumArt: Failed to grab "
                     "slave socket on '%1'").arg(hostname));
 
@@ -6154,7 +6154,7 @@
             return;
         }
 
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_ERR, LOC +
             QString("HandleMusicTagGetImage: Failed to grab slave "
                     "socket on '%1'").arg(hostname));
     }
@@ -6206,7 +6206,7 @@
             return;
         }
 
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_ERR, LOC +
             QString("HandleMusicTagChangeImage: Failed to grab "
                     "slave socket on '%1'").arg(hostname));
 
@@ -6373,7 +6373,7 @@
             return;
         }
 
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_ERR, LOC +
             QString("HandleMusicTagAddImage: Failed to grab "
                     "slave socket on '%1'").arg(hostname));
 
@@ -6528,7 +6528,7 @@
             return;
         }
 
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_ERR, LOC +
             QString("HandleMusicTagRemoveImage: Failed to grab "
                     "slave socket on '%1'").arg(hostname));
 
@@ -6667,7 +6667,7 @@
             return;
         }
 
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_ERR, LOC +
             QString("HandleMusicFindLyrics: Failed to grab slave "
                     "socket on '%1'").arg(hostname));
     }
@@ -6844,7 +6844,7 @@
             return;
         }
 
-        LOG(VB_GENERAL, LOG_INFO, LOC +
+        LOG(VB_GENERAL, LOG_ERR, LOC +
             QString("HandleMusicSaveLyrics: Failed to grab slave "
                     "socket on '%1'").arg(hostname));
     }
@@ -7699,7 +7699,7 @@
                 }
             }
 
-            LOG(VB_GENERAL, LOG_INFO, QString("%1 sock(%2) '%3' disconnected")
+            LOG(VB_GENERAL, LOG_DEBUG, QString("%1 sock(%2) '%3' disconnected")
                 .arg(pbs->getBlockShutdown() ? "Playback" : "Monitor")
                 .arg(quintptr(socket),0,16)
                 .arg(pbs->getHostname()) );
@@ -7739,7 +7739,7 @@
         MythSocket *sock = (*ft)->getSocket();
         if (sock == socket)
         {
-            LOG(VB_GENERAL, LOG_INFO, QString("BEFileTransfer sock(%1) disconnected")
+            LOG(VB_GENERAL, LOG_DEBUG, QString("BEFileTransfer sock(%1) disconnected")
                 .arg(quintptr(socket),0,16) );
             (*ft)->DecrRef();
             m_fileTransferList.erase(ft);
@@ -7752,7 +7752,7 @@
     QSet<MythSocket*>::iterator cs = m_controlSocketList.find(socket);
     if (cs != m_controlSocketList.end())
     {
-        LOG(VB_GENERAL, LOG_INFO, QString("Control sock(%1) disconnected")
+        LOG(VB_GENERAL, LOG_DEBUG, QString("Control sock(%1) disconnected")
             .arg(quintptr(socket),0,16) );
         (*cs)->DecrRef();
         m_controlSocketList.erase(cs);
--

MiniMyth2

