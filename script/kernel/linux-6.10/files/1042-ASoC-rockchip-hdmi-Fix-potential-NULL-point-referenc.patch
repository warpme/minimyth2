From bd5edc8a389ac2072fcf4e3e62af9f1e97145812 Mon Sep 17 00:00:00 2001
From: Sugar Zhang <sugar.zhang@rock-chips.com>
Date: Fri, 3 Mar 2023 10:35:36 +0800
Subject: [PATCH 72/86] ASoC: rockchip: hdmi: Fix potential NULL point
 reference

Signed-off-by: Sugar Zhang <sugar.zhang@rock-chips.com>
Change-Id: I9d0c2adbdffc268d88bac31c1db31507fd82661d
Signed-off-by: Detlev Casanova <detlev.casanova@collabora.com>
---
 sound/soc/rockchip/rockchip_hdmi.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/sound/soc/rockchip/rockchip_hdmi.c b/sound/soc/rockchip/rockchip_hdmi.c
index 449af7c81b6..395f8dbdf00 100644
--- a/sound/soc/rockchip/rockchip_hdmi.c
+++ b/sound/soc/rockchip/rockchip_hdmi.c
@@ -227,6 +227,9 @@ static int rk_hdmi_probe(struct platform_device *pdev)
 
 	codecs = devm_kcalloc(&pdev->dev, idx,
 			      sizeof(*codecs), GFP_KERNEL);
+	if (!codecs)
+		return -ENOMEM;
+
 	rk_data->dai.codecs = codecs;
 	rk_data->dai.num_codecs = idx;
 	idx = 0;
-- 
2.43.0

