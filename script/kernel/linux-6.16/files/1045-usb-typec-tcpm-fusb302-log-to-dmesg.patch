From c1dbf4c8ed9d09aefddc8eaa79b499df6e586f25 Mon Sep 17 00:00:00 2001
From: Sebastian Reichel <sebastian.reichel@collabora.com>
Date: Fri, 4 Apr 2025 20:04:49 +0200
Subject: [PATCH 014/108] [DEBUG] usb: typec: tcpm: also log to dmesg

Also log to normal dmesg to assist debugging hard reset issues.

Signed-off-by: Sebastian Reichel <sebastian.reichel@collabora.com>
---
 drivers/usb/typec/tcpm/tcpm.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/usb/typec/tcpm/tcpm.c b/drivers/usb/typec/tcpm/tcpm.c
index 1f6fdfaa34..1f70efa621 100644
--- a/drivers/usb/typec/tcpm/tcpm.c
+++ b/drivers/usb/typec/tcpm/tcpm.c
@@ -723,6 +723,8 @@ static void _tcpm_log(struct tcpm_port *port, const char *fmt, va_list args)
 
 	vsnprintf(tmpbuffer, sizeof(tmpbuffer), fmt, args);
 
+	dev_dbg(port->dev, "%s\n", tmpbuffer);
+
 	if (tcpm_log_full(port)) {
 		port->logbuffer_head = max(port->logbuffer_head - 1, 0);
 		strcpy(tmpbuffer, "overflow");
-- 
2.46.0

From 419c41b3240b00392b3730999ec76a250e76e6b7 Mon Sep 17 00:00:00 2001
From: Sebastian Reichel <sebastian.reichel@collabora.com>
Date: Tue, 1 Jul 2025 22:58:37 +0200
Subject: [PATCH 015/108] [DEBUG] usb: typec: fusb302: also log to dmesg

Also log to normal dmesg to assist debugging hard reset issues.

Signed-off-by: Sebastian Reichel <sebastian.reichel@collabora.com>
---
 drivers/usb/typec/tcpm/fusb302.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/usb/typec/tcpm/fusb302.c b/drivers/usb/typec/tcpm/fusb302.c
index a4ff2403dd..d235e39484 100644
--- a/drivers/usb/typec/tcpm/fusb302.c
+++ b/drivers/usb/typec/tcpm/fusb302.c
@@ -149,6 +149,8 @@ static void _fusb302_log(struct fusb302_chip *chip, const char *fmt,
 
 	vsnprintf(tmpbuffer, sizeof(tmpbuffer), fmt, args);
 
+	dev_dbg(chip->dev, "%s\n", tmpbuffer);
+
 	mutex_lock(&chip->logbuffer_lock);
 
 	if (fusb302_log_full(chip)) {
-- 
2.46.0

